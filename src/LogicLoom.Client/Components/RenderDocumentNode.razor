@using LogicLoom.Client.Models
@using LogicLoom.Client.Components

<div class="node @(Node.Type.ToLower()) @(Node.IsBold ? "fw-bold" : "") @(Node.IsItalic ? "fst-italic" : "")"
    style="margin-left: @(Node.Level * 20)px">
    <div class="node-content">
        @if (Node.Type == "ListItem")
        {
            <span class="list-marker">â€¢</span>
        }
        <span class="@Node.StyleName">@Node.Content</span>
    </div>
    @{
        var children = AllNodes.Where(n => n.ParentId == Node.Id).OrderBy(n => n.Position).ToList();
        foreach (var child in children)
        {
            <RenderDocumentNode Node="@child" AllNodes="@AllNodes" />
        }
    }
</div>

<style>
    .node {
        margin-bottom: 0.5rem;
    }

    .node-content {
        display: flex;
        align-items: flex-start;
        gap: 0.5rem;
    }

    .list-marker {
        flex-shrink: 0;
        width: 1rem;
    }

    .paragraph {
        /* Add specific styles for paragraphs if needed */
    }

    .listitem {
        /* Add specific styles for list items if needed */
    }
</style>

@code {
    [Parameter, EditorRequired]
    public DocumentNode Node { get; set; } = null!;

    [Parameter, EditorRequired]
    public List<DocumentNode> AllNodes { get; set; } = null!;
}
