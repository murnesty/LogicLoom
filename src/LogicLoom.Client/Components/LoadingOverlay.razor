@if (IsLoading)
{
    <div class="loading-overlay @(_fullscreen ? "fullscreen" : "")" style="@_style">
        <div class="loading-content">
            <div class="spinner">
                <div class="spinner-border" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
            </div>
            @if (!string.IsNullOrEmpty(Message))
            {
                <div class="loading-message">@Message</div>
            }
        </div>
    </div>
}

<style>
    .loading-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(var(--vscode-editor-background-rgb), 0.8);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000;
    }

    .loading-overlay.fullscreen {
        position: fixed;
    }

    .loading-content {
        text-align: center;
    }

    .spinner {
        margin-bottom: 1rem;
    }

    .loading-message {
        color: var(--vscode-foreground);
        font-size: 1.1em;
    }

    :root {
        --vscode-editor-background-rgb: 30, 30, 30;
    }
</style>

@code {
    [Parameter]
    public bool IsLoading { get; set; }

    [Parameter]
    public string Message { get; set; } = "";

    [Parameter]
    public bool Fullscreen { get; set; }

    private bool _fullscreen => Fullscreen;
    private string _style => $"background: rgba(var(--vscode-editor-background-rgb), {(_fullscreen ? "0.9" : "0.8")});";
}
